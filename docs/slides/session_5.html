<!DOCTYPE html>
<html lang="en"><head>
<script src="session_5_files/libs/clipboard/clipboard.min.js"></script>
<script src="session_5_files/libs/quarto-html/tabby.min.js"></script>
<script src="session_5_files/libs/quarto-html/popper.min.js"></script>
<script src="session_5_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="session_5_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="session_5_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="session_5_files/libs/quarto-html/quarto-syntax-highlighting-3aa970819e70fbc78806154e5a1fcd28.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-99.9.9">

  <title>Session 5: Model Averaging</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="session_5_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="session_5_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="session_5_files/libs/revealjs/dist/theme/quarto-5c16f98d3e415a13fabd7d88805bbf19.css">
  <link href="session_5_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="session_5_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="session_5_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="session_5_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="session_5_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="session_5_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Session 5: Model Averaging</h1>
  <p class="subtitle">Model Selection and Model Simplification</p>

<div class="quarto-title-authors">
</div>

</section>
<section id="the-model-uncertainty-problem" class="slide level2">
<h2>The Model Uncertainty Problem</h2>
<p>We have fit multiple models and identified several with similar empirical support.</p>
<p>For example, models with <span class="math inline">\(\Delta \text{AIC} &lt; 2\ \)</span> are competitive.</p>
<p>The traditional approach is to select one “best” model and ignore the others. This discards information about model uncertainty. It treats selection as if it were certain when it is not.</p>
<p><em>The consequence</em>: Predictions from the selected model ignore uncertainty about which model is correct. Standard errors and confidence intervals are too narrow because they condition on the selected model. Post-selection inference is invalid.</p>
<p><em>An alternative</em>: Model averaging acknowledges uncertainty by combining predictions across multiple models. We weight each model by its empirical support rather than selecting a single winner.</p>
</section>
<section id="what-is-model-averaging" class="slide level2">
<h2>What is Model Averaging?</h2>
<p>Rather than selecting model <span class="math inline">\(k^*\)</span> with, for example, minimum AIC, we form a weighted average across all <span class="math inline">\(K\)</span> candidate models.</p>
<p>The model-averaged prediction for a new observation <span class="math inline">\(x_0\)</span> is:</p>
<p><span class="math display">\[\hat{y}_{\text{avg}}(x_0) = \sum_{k=1}^{K} w_k \cdot \hat{y}_k(x_0)\]</span></p>
<p>where <span class="math inline">\(w_k\)</span> is the weight assigned to model <span class="math inline">\(k\)</span> and <span class="math inline">\(\hat{y}_k(x_0)\)</span> is the prediction from model <span class="math inline">\(k\)</span>.</p>
<p>The weights sum to one: <span class="math inline">\(\sum_{k=1}^{K} w_k = 1\)</span>.</p>
<p>The weights reflect the relative empirical support for each model. Models with better fit receive higher weight. Models with poor fit receive near-zero weight.</p>
</section>
<section id="akaike-weights" class="slide level2">
<h2>Akaike Weights</h2>
<p>The standard weighting scheme uses Akaike weights derived from AIC differences.</p>
<p>For model <span class="math inline">\(k\)</span> with AIC value <span class="math inline">\(\text{AIC}_k\)</span>, define:</p>
<p><span class="math display">\[\Delta_k = \text{AIC}_k - \min(\text{AIC})\]</span></p>
<p>The Akaike weight is:</p>
<p><span class="math display">\[w_k = \frac{\exp(-\Delta_k / 2)}{\sum_{j=1}^{K} \exp(-\Delta_j / 2)}\]</span></p>
<p><em>Interpretation</em>: The weight <span class="math inline">\(w_k\)</span> can be interpreted as the probability that model <span class="math inline">\(k\)</span> is the best model for prediction among the candidate set, given the data and assuming one of the models is correct.</p>
<p>Models with <span class="math inline">\(\Delta_k = 0\)</span> (the best model) receive the highest weight. Models with large <span class="math inline">\(\Delta_k\)</span> receive weight approaching zero.</p>
</section>
<section id="properties-of-akaike-weights" class="slide level2">
<h2>Properties of Akaike Weights</h2>
<p><em>Weights sum to one</em>: By construction, <span class="math inline">\(\sum_{k=1}^{K} w_k = 1\ \)</span>.</p>
<p>This ensures the weighted average is a convex combination of model predictions.</p>
<p><em>Exponential decay</em>: Weight decreases exponentially with <span class="math inline">\(\Delta_k\)</span>.</p>
<p>When <span class="math inline">\(\Delta_k = 2\)</span>, the model receives weight approximately <span class="math inline">\(1/e \approx 0.37\)</span> times the weight of the best model. When <span class="math inline">\(\Delta_k = 10\)</span>, the model receives weight approximately <span class="math inline">\(0.007\)</span> times the weight of the best model.</p>
<p>This means models with <span class="math inline">\(\Delta_k &gt; 10\ \)</span> contribute negligibly to the average.</p>
<p><em>Relative support</em>: The weight ratio <span class="math inline">\(w_k / w_j = \exp[(\Delta_j - \Delta_k)/2]\ \)</span> measures the relative support for model <span class="math inline">\(k\)</span> versus model <span class="math inline">\(j\)</span>. If <span class="math inline">\(\Delta_k = 0\)</span> and <span class="math inline">\(\Delta_j = 4\)</span>, then <span class="math inline">\(w_k / w_j = \exp(2) \approx 7.4\ \ \)</span>, meaning model <span class="math inline">\(k\)</span> has about 7 times the support of model <span class="math inline">\(j\)</span>.</p>
</section>
<section id="example-three-competitive-models" class="slide level2">
<h2>Example: Three Competitive Models</h2>
<p>Suppose we have three models with AIC values:</p>
<p><span class="math display">\[\text{AIC}_1 = 450.2, \quad \text{AIC}_2 = 451.8, \quad \text{AIC}_3 = 455.0\]</span></p>
<p><em>Compute differences</em>: <span class="math display">\[\Delta_1 = 0, \quad \Delta_2 = 1.6, \quad \Delta_3 = 4.8\]</span></p>
<p><em>Compute weights</em>:</p>
<p><span class="math display">\[w_1 = \frac{\exp(0)}{\exp(0) + \exp(-0.8) + \exp(-2.4)} = \frac{1}{1 + 0.449 + 0.091} = 0.650\]</span></p>
<p><span class="math display">\[w_2 = \frac{\exp(-0.8)}{1.540} = 0.292\]</span></p>
<p><span class="math display">\[w_3 = \frac{\exp(-2.4)}{1.540} = 0.059\]</span></p>
<p>The best model receives 65% weight, the second model 29%, and the third only 6%.</p>
</section>
<section id="when-to-use-model-averaging" class="slide level2">
<h2>When to Use Model Averaging</h2>
<p><em>When multiple models have non-trivial evidential support</em>:</p>
<p>If several models have <span class="math inline">\(\Delta \text{AIC} &lt; 2\ \)</span>, they are empirically indistinguishable. Selecting one arbitrarily discards information. Model averaging incorporates all competitive models.</p>
<p><em>When model uncertainty is important</em>: If the goal is prediction with honest uncertainty quantification, model averaging accounts for both parameter uncertainty (within each model) and model uncertainty (across models).</p>
<p><em>When model interpretation is secondary</em>: Model averaging produces better predictions but complicates interpretation. The averaged predictions do not correspond to any single model. If the goal is to identify a single parsimonious model for interpretation, selection may be preferred.</p>
</section>
<section id="when-not-to-use-model-averaging" class="slide level2">
<h2>When not to Use Model Averaging</h2>
<h3 id="when-one-model-dominates">When one model dominates</h3>
<p>If the best model has <span class="math inline">\(\Delta_k &gt; 10\ \)</span> for all other models, that model receives nearly all weight. Model averaging reduces to single-model selection.</p>
<h3 id="when-interpretability-is-paramount">When interpretability is paramount</h3>
<p>Averaged coefficients or predictions do not correspond to a coherent mechanistic model. For scientific inference about specific mechanisms, a single interpretable model may be preferred.</p>
<h3 id="when-computational-cost-is-prohibitive">When computational cost is prohibitive</h3>
<p>Model averaging requires fitting and storing all <span class="math inline">\(K\)</span> candidate models. For very large <span class="math inline">\(K\)</span> or computationally intensive models, this may be infeasible.</p>
</section>
<section id="model-averaged-predictions" class="slide level2">
<h2>Model-Averaged Predictions</h2>
<p>For a new observation <span class="math inline">\(x_0\)</span>, the model-averaged prediction is:</p>
<p><span class="math display">\[\hat{y}_{\text{avg}}(x_0) = \sum_{k=1}^{K} w_k \cdot \hat{y}_k(x_0)\]</span></p>
<p>where <span class="math inline">\(\hat{y}_k(x_0)\)</span> is the prediction from model <span class="math inline">\(k\)</span> fitted to the full data.</p>
<p>The variance of the model-averaged prediction accounts for both parameter uncertainty and model uncertainty:</p>
<p><span class="math display">\[\text{Var}(\hat{y}_{\text{avg}}(x_0)) = \sum_{k=1}^{K} w_k \left[ \text{Var}(\hat{y}_k(x_0)) + (\hat{y}_k(x_0) - \hat{y}_{\text{avg}}(x_0))^2 \right]\]</span></p>
<p>The first term is the weighted average of within-model variances. The second term captures the variability in predictions across models.</p>
</section>
<section id="model-averaged-coefficients" class="slide level2">
<h2>Model-Averaged Coefficients</h2>
<p>We can also compute model-averaged coefficient estimates.</p>
<p>For predictor <span class="math inline">\(x_j\)</span>, the model-averaged coefficient is:</p>
<p><span class="math display">\[\bar{\beta}_j = \sum_{k=1}^{K} w_k \cdot \beta_{jk}\]</span></p>
<p>where <span class="math inline">\(\beta_{jk}\)</span> is the coefficient for <span class="math inline">\(x_j\)</span> in model <span class="math inline">\(k\)</span>.</p>
<h3 id="handling-predictors-not-in-all-models">Handling predictors not in all models</h3>
<p>If predictor <span class="math inline">\(x_j\)</span> does not appear in model <span class="math inline">\(k\)</span>, we set <span class="math inline">\(\beta_{jk} = 0\)</span>.</p>
<p>This means models that exclude <span class="math inline">\(x_j\)</span> contribute zero to its averaged coefficient.</p>
<p>The averaged coefficient reflects both the magnitude of <span class="math inline">\(\beta_j\)</span> in models where it appears and the support for those models.</p>
</section>
<section id="confidence-sets" class="slide level2">
<h2>Confidence Sets</h2>
<p>Rather than selecting a single “best” model, we can identify a confidence set of models.</p>
<p>A 95% confidence set contains models whose cumulative Akaike weight sums to 0.95.</p>
<p><em>Procedure</em>: Rank models by AIC (or equivalently, by descending weight <span class="math inline">\(w_k\)</span>). Include models sequentially until their cumulative weight reaches 0.95:</p>
<p><span class="math display">\[\sum_{k \in \mathcal{S}} w_k \geq 0.95\]</span></p>
<p>The confidence set <span class="math inline">\(\mathcal{S}\)</span> contains the smallest collection of models accounting for 95% of the total weight.</p>
<p><em>Interpretation</em>: These are the models with substantial empirical support. Any model outside this set has negligible support given the data.</p>
</section>
<section id="example-confidence-set" class="slide level2">
<h2>Example: Confidence Set</h2>
<p>Suppose we have five models with weights:</p>
<p><span class="math display">\[w_1 = 0.50, \quad w_2 = 0.30, \quad w_3 = 0.12, \quad w_4 = 0.05, \quad w_5 = 0.03\]</span></p>
<h3 id="cumulative-weights">Cumulative weights</h3>
<ul>
<li>Model 1: 0.50</li>
<li>Models 1-2: 0.80</li>
<li>Models 1-3: 0.92</li>
<li>Models 1-4: 0.97</li>
</ul>
<p>The 95% confidence set contains models 1, 2, 3, and 4. Model 5 is excluded because its inclusion is not needed to reach 95% cumulative weight.</p>
</section>
<section id="model-averaging-vs.-model-selection" class="slide level2">
<h2>Model Averaging vs.&nbsp;Model Selection</h2>
<h3 id="model-selection">Model selection</h3>
<p>Choose model <span class="math inline">\(k^*\)</span> with minimum AIC. Use only <span class="math inline">\(\hat{y}_{k^*}(x_0)\)</span> for predictions. Inference conditions on the selected model. Simpler to interpret: a single model with specific predictors.</p>
<h3 id="model-averaging">Model averaging</h3>
<p>Compute weighted average <span class="math inline">\(\hat{y}_{\text{avg}}(x_0) = \sum_k w_k \hat{y}_k(x_0)\ \ \)</span>. Predictions incorporate information from all competitive models. Inference accounts for model uncertainty. Better prediction performance when multiple models have similar support.</p>
<h3 id="empirical-evidence">Empirical evidence</h3>
<p>Simulation studies show model averaging often improves prediction accuracy compared to single-model selection, especially when model uncertainty is high.</p>
</section>
<section id="practical-implementation" class="slide level2">
<h2>Practical Implementation</h2>
<p>Model averaging is implemented in the MuMIn package in R.</p>
<h3 id="workflow">Workflow</h3>
<p>Fit the global model containing all candidate predictors. Use <code>dredge()</code> to fit all subsets. Calculate AIC and Akaike weights for each model. Use <code>model.avg()</code> to compute averaged predictions and coefficients.</p>
<p>Alternatively, manually specify a candidate set of theoretically motivated models and compute weights.</p>
<h3 id="reporting">Reporting</h3>
<p>Report all models in the confidence set (cumulative weight <span class="math inline">\(\geq 0.95\)</span>). Show each model’s predictors, AIC, <span class="math inline">\(\Delta \text{AIC}\)</span>, and weight. Report model-averaged coefficients with standard errors. Present model-averaged predictions with confidence intervals.</p>
</section>
<section id="limitations-and-caveats" class="slide level2">
<h2>Limitations and Caveats</h2>
<p><em>The candidate set matters</em>: Model averaging cannot compensate for a poorly chosen candidate set. If all models are badly misspecified, averaging will not improve predictions. The candidate set should be theoretically motivated, not an exhaustive search.</p>
<p><em>Computational cost</em>: Fitting all <span class="math inline">\(2^p\)</span> subsets is infeasible for large <span class="math inline">\(p\)</span>. Regularization (Session 4) is more scalable for high-dimensional problems.</p>
<p><em>Not a panacea for selection bias</em>: Model averaging reduces but does not eliminate selection bias. If models are data-selected (e.g., via stepwise), averaging them does not fix the underlying problem.</p>
<p><em>Interpretation complexity</em>: Averaged coefficients do not correspond to a single causal model. This complicates scientific interpretation and mechanistic understanding.</p>
</section>
<section id="aic-vs.-bic-for-weights" class="slide level2">
<h2>AIC vs.&nbsp;BIC for Weights</h2>
<p>We can compute weights using BIC instead of AIC:</p>
<p><span class="math display">\[w_k^{\text{BIC}} = \frac{\exp(-\Delta_k^{\text{BIC}} / 2)}{\sum_{j=1}^{K} \exp(-\Delta_j^{\text{BIC}} / 2)}\]</span></p>
<p>where <span class="math inline">\(\Delta_k^{\text{BIC}} = \text{BIC}_k - \min(\text{BIC})\)</span>.</p>
<h3 id="difference">Difference</h3>
<p>BIC penalizes complexity more heavily than AIC. BIC weights tend to concentrate more on a single best model. AIC weights spread more evenly across competitive models.</p>
<p>The choice depends on the goal: AIC for prediction, BIC for parsimony.</p>
</section>
<section id="variable-importance" class="slide level2">
<h2>Variable Importance</h2>
<p>Model averaging provides a natural measure of variable importance.</p>
<p>For predictor <span class="math inline">\(x_j\)</span>, define:</p>
<p><span class="math display">\[I(x_j) = \sum_{k: x_j \in \mathcal{M}_k} w_k\]</span></p>
<p>This is the sum of weights over all models that include <span class="math inline">\(x_j\)</span>.</p>
<h3 id="interpretation">Interpretation</h3>
<p><span class="math inline">\(I(x_j) = 1\)</span> means <span class="math inline">\(x_j\)</span> appears in all competitive models (strong evidence for inclusion). <span class="math inline">\(I(x_j) \approx 0\)</span> means <span class="math inline">\(x_j\)</span> appears only in models with negligible weight (weak evidence). <span class="math inline">\(0 &lt; I(x_j) &lt; 1\)</span> indicates uncertainty about whether <span class="math inline">\(x_j\)</span> should be included.</p>
<p>This measure is more informative than binary inclusion/exclusion from a single selected model.</p>
</section>
<section id="looking-ahead" class="slide level2">
<h2>Looking Ahead</h2>
<h3 id="this-session">This session</h3>
<p>We covered model averaging as an alternative to single-model selection.</p>
<h3 id="next-session">Next session</h3>
<p>We will cover special topics including model selection for mixed models, the distinction between prediction, explanation, and causation, and best practices for transparent reporting of model selection.</p>
<h3 id="key-concepts-established">Key concepts established</h3>
<p>Akaike weights measure relative empirical support for each model. Model averaging often improves prediction compared to single-model selection. The confidence set contains models accounting for 95% of cumulative weight. Model-averaged coefficients and variable importance measures provide richer inference than single-model selection.</p>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p><a href="https://mark-andrews.github.io/msms/">mark-andrews.github.io/msms/</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="session_5_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="session_5_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="session_5_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="session_5_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="session_5_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="session_5_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="session_5_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="session_5_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="session_5_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="session_5_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="session_5_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>